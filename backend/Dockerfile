FROM python:3.11

WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# ğŸ”‘ Postgres client ì„¤ì¹˜ (pg_isready í¬í•¨)
RUN apt-get update && apt-get install -y postgresql-client && rm -rf /var/lib/apt/lists/*

# âš ï¸ .dockerignore ì„¤ì •ì´ ì—†ìœ¼ë©´ .venvê¹Œì§€ ì „ë¶€ ë³µì‚¬ë¨ â†’ ë¹Œë“œ ë¬´ê±°ì›Œì§
# ğŸ‘‰ ë£¨íŠ¸ì— .dockerignore íŒŒì¼ ë§Œë“¤ê³  ë¶ˆí•„ìš”í•œ ê²ƒ ì œì™¸:
# .git
# .venv
# __pycache__
# *.pyc
# *.pyo

COPY . .

RUN chmod +x start.sh

# CMDëŠ” ê¸°ë³¸ í”„ë¡œì„¸ìŠ¤ë§Œ ì‹¤í–‰
CMD ["./start.sh"]
